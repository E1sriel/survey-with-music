<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>问卷测试与音乐播放</title>
    <style>
        /* 播放器样式 */
        #music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #song-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        audio { width: 300px; }
    </style>
</head>
<body>
    <!-- 问卷内容 -->
    <div style="width: 80%; margin: 0 auto;">
        <!-- 粘贴问卷iframe代码 -->
        <iframe src="https://www.wjx.cn/vm/PpX1K07.aspx" 
                frameborder="0" 
                style="width:100%;height:80vh">
        </iframe>
    </div>

    <!-- 音乐播放器 -->
    <div id="music-player">
        <div id="song-title">当前播放：加载中...</div>
        <audio id="audio-player" controls loop>
            <source src="assets/music/CMJ - 所念皆星河.mp3" type="audio/mpeg">
            您的浏览器不支持音频播放。
        </audio>
    </div>

    <script>
        // 自动显示歌曲名
        const audioPlayer = document.getElementById('audio-player');
        audioPlayer.addEventListener('loadedmetadata', () => {
            const fileName = audioPlayer.src.split('/').pop().replace('.mp3', '');
            document.getElementById('song-title').textContent = `当前播放：${decodeURI(fileName)}`;
        });

        // 单曲循环（HTML5 loop属性已启用，此处为兼容性增强）
        audioPlayer.addEventListener('ended', () => {
            audioPlayer.currentTime = 0;
            audioPlayer.play();
        });
    </script>
</body>
</html>

